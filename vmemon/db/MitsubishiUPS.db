
record (longin,"CF:CmptrRm:CR{UPS:3}Sts:Raw__Sts")
{
    field(DESC, "UPS Battery Status")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
#    field(SCAN, "10 second")
    field(SCAN, "10 second")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}Sts:_Sts")
    info (OID,  "1.3.6.1.4.1.13891.101.2.1.0")
}

record(mbbi, "CF:CmptrRm:CR{UPS:3}Sts:_Sts")
{
    field(INP, "CF:CmptrRm:CR{UPS:3}Sts:Raw__Sts")
    field(ZRST, "Undefined")
    field(ONST, "Unknown")
    field(TWST, "Normal")
    field(THST, "Low")
    field(FRST, "Depleted")
    field(ZRSV, "MAJOR")
    field(ONSV, "MAJOR")
    field(TWSV, "NO_ALARM")
    field(THSV, "MAJOR")
    field(FRSV, "MAJOR")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}M:Raw__I")
}

record (longin,"CF:CmptrRm:CR{UPS:3}M:Raw__I")
{
    field(DESC, "Output Source")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}M:_I")
    info (OID,  "1.3.6.1.4.1.13891.101.4.1.0")
}

record(mbbi, "CF:CmptrRm:CR{UPS:3}M:_I")
{
    field(INP, "CF:CmptrRm:CR{UPS:3}M:Raw__I")
    field(ZRST, "Undefined")
    field(ONST, "Other")
    field(TWST, "None")
    field(THST, "Normal")
    field(FRST, "Bypass")
    field(FVST, "Battery")
    field(SXST, "Booster")
    field(SVST, "Reducer")
    field(ONSV, "NO_ALARM")
    field(TWSV, "NO_ALARM")
    field(THSV, "NO_ALARM")
    field(FRSV, "MAJOR")
    field(FVSV, "MAJOR")
    field(SXSV, "MAJOR")
    field(SVSV, "MAJOR")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}Val:%Load__I")
}

record (ai,"CF:CmptrRm:CR{UPS:3}Val:%Load__I")
{
    field(DESC, "% Output Load")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
#    field(ASLO, ".01")
   info (OID,  "1.3.6.1.4.1.13891.101.4.4.1.5.1")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}Val:%Load__Calc")
}

#Scaling calculation
record(calc, "CF:CmptrRm:CR{UPS:3}Val:%Load__Calc")
{
    field(INPA, "CF:CmptrRm:CR{UPS:3}Val:%Load__I MS")
    field(CALC, "A*.01")
	field(FLNK, "CF:CmptrRm:CR{UPS:3}V:Input__I")
    field(HIHI, 80)
    field(HHSV, "MAJOR")
#        field(TPRO, "1")
}

record (longin,"CF:CmptrRm:CR{UPS:3}V:Input__I")
{
    field(DESC, "Input Voltage")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
	field(HIHI, 528)
	field(HHSV, "MAJOR")
	field(LOLO, 432)
	field(LLSV, MAJOR)
    info (OID,  "1.3.6.1.4.1.13891.101.3.3.1.3.1")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}I:Input__I")
}
record (ai,"CF:CmptrRm:CR{UPS:3}I:Input__I")
{
    field(DESC, "Input Current")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
    field(ASLO, ".01")
#	field(HIHI, 239)
#	field(HHSV, "MAJOR")
#	field(LOLO, 176)
#	field(LLSV,"MAJOR")
    info (OID,  "1.3.6.1.4.1.13891.101.3.3.1.4")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}I:Input__Calc")
}

#Scaling calculation
record(calc, "CF:CmptrRm:CR{UPS:3}I:Input__Calc")
{
        field(INPA, "CF:CmptrRm:CR{UPS:3}I:Input__I MS")
		field(CALC, "A*.1")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}Freq:Input__I")
    field(HIHI, 36.1)
    field(HHSV, "MAJOR")
#        field(TPRO, "1")
}
#record (longin,"CF:CmptrRm:CR{UPS:3}Freq:Input__I")
#{
#    field(DESC, "Input Frequency")
#    field(DTYP, "Snmp")
#    field(INP,  "@10.0.145.33 public INTEGER: 128")
#    info (OID,  "1.3.6.1.4.1.13891.101.3.3.1.2.0")
#    field(FLNK, "CF:CmptrRm:CR{UPS:3}UPS:_OutV")   
#}

record (ai,"CF:CmptrRm:CR{UPS:3}Freq:Input__I")
{
    field(DESC, "Input Frequency")
    field(LINR, "LINEAR")
    field(ESLO, .1)
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
    info (OID,  "1.3.6.1.4.1.13891.101.3.3.1.2.1")
#    field(FLNK, "CF:CmptrRm:CR{UPS:3}V:Output__I")   
    field(FLNK, "CF:CmptrRm:CR{UPS:3}Freq:Input__Calc")   
}

#Scaling calculation
record(calc, "CF:CmptrRm:CR{UPS:3}Freq:Input__Calc")
{
    field(INPA, "CF:CmptrRm:CR{UPS:3}Freq:Input__I MS")
	field(CALC, "A*.1")
	field(FLNK, "CF:CmptrRm:CR{UPS:3}V:Output__I")
	field(HIHI, 63.0)
	field(HHSV, "MAJOR")
	field(LOLO, 57.0)
	field(LLSV, "MAJOR")
#        field(TPRO, "1")
}

record (longin,"CF:CmptrRm:CR{UPS:3}V:Output__I")
{
    field(DESC, "Output Voltage")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
	field(HIHI, 495)
	field(HHSV, "MAJOR")
	field(LOLO, 466)
	field(LLSV, "MAJOR")
    info (OID,  "1.3.6.1.4.1.13891.101.4.4.1.2.1")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}I:OutputPa__I")
}


record (ai,"CF:CmptrRm:CR{UPS:3}I:OutputPa__I")
{
    field(DESC, "Output Current")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
    field(ASLO, ".01")
#	field(HIHI, 239)
#	field(HHSV, "MAJOR")
#	field(LOLO, 176)
#	field(LLSV, "MAJOR")
    info (OID,  "1.3.6.1.4.1.13891.101.4.4.1.3.1")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}I:OutputPb__I")
}
record (ai,"CF:CmptrRm:CR{UPS:3}I:OutputPb__I")
{
    field(DESC, "Output Current")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
    field(ASLO, ".01")
#	field(HIHI, 239)
#	field(HHSV, "MAJOR")
#	field(LOLO, 176)
#	field(LLSV, "MAJOR")
    info (OID,  "1.3.6.1.4.1.13891.101.4.4.1.3.2")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}I:OutputPc__I")
}
record (ai,"CF:CmptrRm:CR{UPS:3}I:OutputPc__I")
{
    field(DESC, "Output Current")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
    field(ASLO, ".01")
#	field(HIHI, 239)
#	field(HHSV, "MAJOR")
#	field(LOLO, 176)
#	field(LLSV, "MAJOR")
    info (OID,  "1.3.6.1.4.1.13891.101.4.4.1.3.3")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}I:Output__Calc")
}
#Scaling calculation
record(calc, "CF:CmptrRm:CR{UPS:3}I:Output__Calc")
{
        field(INPA, "CF:CmptrRm:CR{UPS:3}I:OutputPa__I MS")
        field(INPB, "CF:CmptrRm:CR{UPS:3}I:OutputPb__I MS")
        field(INPC, "CF:CmptrRm:CR{UPS:3}I:OutputPc__I MS")
	field(CALC, "(MAX(A,MAX(B,C)))*.1")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}Freq:Output__I")
    field(HIHI, 36.1)
    field(HHSV, "MAJOR")
#        field(TPRO, "1")
}


record (longin,"CF:CmptrRm:CR{UPS:3}Freq:Output__I")
{
    field(DESC, "Output Frequency")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
    info (OID,  "1.3.6.1.4.1.13891.101.4.2.0")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}Freq:Output__Calc")
}

#Scaling calculation
record(calc, "CF:CmptrRm:CR{UPS:3}Freq:Output__Calc")
{
    field(INPA, "CF:CmptrRm:CR{UPS:3}Freq:Output__I MS")
	field(CALC, "A*.1")
	field(HIHI, 63.0)
	field(HHSV, "MAJOR")
	field(LOLO, 57.0)
	field(LLSV, "MAJOR")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}Val:%Battery__I")
#   field(TPRO, "1")
}

record (longin,"CF:CmptrRm:CR{UPS:3}Val:%Battery__I")
{
    field(DESC, "% Battery Remaining")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
	field(LOLO, 800)
	field(LLSV, "MAJOR")
    info (OID,  "1.3.6.1.4.1.13891.101.2.4.0")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}V:Battery__Iread")
}

record (longin,"CF:CmptrRm:CR{UPS:3}V:Battery__Iread")
{
    field(DESC, "Battery Voltage")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
	field(LOLO, 800)
	field(LLSV, "MAJOR")
    info (OID,  "1.3.6.1.4.1.13891.101.2.5.0")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}V:Battery__I")
}
#Scaling calculation
record(calc, "CF:CmptrRm:CR{UPS:3}V:Battery__I")
{
    field(INPA, "CF:CmptrRm:CR{UPS:3}V:Battery__Iread MS")
	field(CALC, "A*.1")
	field(HIHI, 551)
	field(HHSV, "MAJOR")
	field(LOLO, 529)
	field(LLSV, "MAJOR")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}T:UPSAir__I")
#   field(TPRO, "1")
}


record (longin,"CF:CmptrRm:CR{UPS:3}T:UPSAir__I")
{
    field(DESC, "Battery Temperature")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
	field(HIHI, 350)
	field(HHSV, "MAJOR")
    info (OID,  "1.3.6.1.4.1.13891.101.2.7.0")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}T:UPSAir__Calc")
}

#Scaling calculation
record(calc, "CF:CmptrRm:CR{UPS:3}T:UPSAir__Calc")
{
        field(INPA, "CF:CmptrRm:CR{UPS:3}T:UPSAir__I")
	field(CALC, "A*.1")
	field(HIHI, 35.0)
	field(HHSV, "MAJOR")
        field(FLNK, "CF:CmptrRm:CR{UPS:3}Cnt:UPSAlarm__I")
#        field(TPRO, "1")
}
record (calc,"CF:CmptrRm:CR{UPS:3}Cnt:UPSAlarm__I")
{    
# This was an ai but was not available on the mitsubishi 
#    field(DESC, "Alarm Count")
#    field(DTYP, "Snmp")
#    field(INP,  "@10.0.145.33 public Gauge32: 128")
#    info (OID,  "1.3.6.1.2.1.33.1.6.1.0")
    field(CALC, "0")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}Time:BatteryLeft__I")
}

record (longin,"CF:CmptrRm:CR{UPS:3}Time:BatteryLeft__I")
{
    field(DESC, "Battery Time Remaining")
    field(DTYP, "Snmp")
    field(INP,  "@10.0.145.33 public INTEGER: 128")
	field(LOLO, 8)
	field(LLSV,"MAJOR")
    info (OID,  "1.3.6.1.4.1.13891.101.2.3.0")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}RH:UPSAir__Calc")
}
record(calc, "CF:CmptrRm:CR{UPS:3}RH:UPSAir__Calc")
{
#        field(INPA, "CF:CmptrRm:CR{UPS:3}RH:UPSAir__I")
		field(CALC, "0")
#	field(HIHI, 63.0)
#	field(HHSV, "MAJOR")
#	field(LOLO, 57.0)
#	field(LLSV, "MAJOR")
    field(FLNK, "")
#        field(TPRO, "1")
}

record(mbbo, "CF:CmptrRm:CR{UPS:3}Cmd:_Sel")
{
    field(ZRST, "On")
    field(ONST, "Off")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(FLNK, "CF:CmptrRm:CR{UPS:3}Cmd:Raw__Sel")
}
record (longout,"CF:CmptrRm:CR{UPS:3}Cmd:Raw__Sel")
{
    field(DESC, "Setting the outlet state")
    field(DTYP, "Snmp")
    field(DOL, "CF:CmptrRm:CR{UPS:3}UPS:_CMD")
    field(OUT,  "@10.0.145.33 public INTEGER: 128 i")
    info (OID,  "1.3.6.1.4.1.13891.101.8.2.0")
}


#UPS Alarm calculation combine all fields
record(calc, "CF:CmptrRm:CR{UPS:3}UPS:AlarmCalcP1")
{
        field(SCAN, "2 second")
        field(INPA, "CF:CmptrRm:CR{UPS:3}Sts:_Sts.SEVR")

        field(INPB, "CF:CmptrRm:CR{UPS:3}V:Input__I.SEVR")
        field(INPC, "CF:CmptrRm:CR{UPS:3}I:Input__Calc.SEVR")
        field(INPD, "CF:CmptrRm:CR{UPS:3}Freq:Input__Calc.SEVR")

	field(CALC, "(((A=2)||(B=2)||(C=2)||(D=2))?1:0)")
	field(HIHI, 1.0)
	field(HHSV, "MAJOR")
#       field(TPRO, "1")

}

#UPS Alarm calculation combine all fields
record(calc, "CF:CmptrRm:CR{UPS:3}UPS:AlarmCalcP2")
{
        field(SCAN, "2 second")
        field(INPA, "CF:CmptrRm:CR{UPS:3}V:Output__I.SEVR")
        field(INPB, "CF:CmptrRm:CR{UPS:3}I:Output__Calc.SEVR")
        field(INPC, "CF:CmptrRm:CR{UPS:3}Freq:Output__Calc.SEVR")

	field(CALC, "(((A=2)||(B=2)||(C=2))?1:0)")
	field(HIHI, 1.0)
	field(HHSV, "MAJOR")
#       field(TPRO, "1")

}


#UPS Alarm calculation combine all fields
record(calc, "CF:CmptrRm:CR{UPS:3}UPS:AlarmCalcP3")
{
        field(SCAN, "2 second")
        field(INPA, "CF:CmptrRm:CR{UPS:3}V:Battery__I.SEVR")
        field(INPB, "CF:CmptrRm:CR{UPS:3}T:UPSAir__Calc.SEVR")
        field(INPC, "CF:CmptrRm:CR{UPS:3}RH:UPSAir__I.SEVR")

	field(CALC, "(((A=2)||(B=2)||(C=2))?1:0)")
	field(HIHI, 1.0)
	field(HHSV, "MAJOR")
#       field(TPRO, "1")

}


#UPS Alarm calculation combine all fields
record(calc, "CF:CmptrRm:CR{UPS:3}UPS:AlarmCalcP4")
{
        field(SCAN, "2 second")
        field(INPA, "CF:CmptrRm:CR{UPS:3}UPS:AlarmCalcP1.SEVR")
        field(INPB, "CF:CmptrRm:CR{UPS:3}UPS:AlarmCalcP2.SEVR")
        field(INPC, "CF:CmptrRm:CR{UPS:3}UPS:AlarmCalcP3.SEVR")

	field(CALC, "(((A=2)||(B=2)||(C=2))?1:0)")
	field(HIHI, 1.0)
	field(HHSV, "MAJOR")
#       field(TPRO, "1")

}





